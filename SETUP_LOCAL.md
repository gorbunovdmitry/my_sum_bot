# üöÄ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ —Å –ª–æ–∫–∞–ª—å–Ω–æ–π –º–æ–¥–µ–ª—å—é

## –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Python –≤–µ—Ä—Å–∏—é:
```bash
python3 --version
# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å Python 3.8 –∏–ª–∏ –≤—ã—à–µ
```

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ pip:
```bash
pip3 --version
```

---

## –®–∞–≥ 2: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

### –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```bash
cd telegram_summary_bot
pip3 install -r requirements.txt
```

**–í–∞–∂–Ω–æ –¥–ª—è Mac M3 Pro:**
- PyTorch –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π MPS (Metal Performance Shaders)
- –≠—Ç–æ –¥–∞—Å—Ç —É—Å–∫–æ—Ä–µ–Ω–∏–µ –Ω–∞ Apple Silicon

### –ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–Ω—É—Ç –ø—Ä–æ–±–ª–µ–º—ã —Å PyTorch:
```bash
# –î–ª—è Mac —Å Apple Silicon (M1/M2/M3)
pip3 install torch torchvision torchaudio
```

---

## –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ .env —Ñ–∞–π–ª–∞

### –°–æ–∑–¥–∞–π—Ç–µ .env –∏–∑ –ø—Ä–∏–º–µ—Ä–∞:
```bash
cp .env.example .env
```

### –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π –º–æ–¥–µ–ª–∏:

```env
# Telegram API (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û)
TELEGRAM_API_ID=–≤–∞—à_api_id
TELEGRAM_API_HASH=–≤–∞—à_api_hash
BOT_TOKEN=–≤–∞—à_bot_token

# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (SQLite –¥–ª—è –Ω–∞—á–∞–ª–∞)
DATABASE_URL=sqlite:///./data/summary_bot.db

# –õ–û–ö–ê–õ–¨–ù–ê–Ø –ú–û–î–ï–õ–¨ (–æ—Å—Ç–∞–≤—å—Ç–µ OpenAI –ø—É—Å—Ç—ã–º)
OPENAI_API_KEY=
LOCAL_MODEL_PATH=facebook/bart-large-cnn

# –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è Mac M3 Pro
MAX_WORKERS=4
ENABLE_CACHING=true
USE_MPS=true

# –û—Å—Ç–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
```

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –º–æ–¥–µ–ª–∏ –¥–ª—è Mac M3 Pro:**
- `facebook/bart-large-cnn` - –ª–µ–≥–∫–∞—è, –±—ã—Å—Ç—Ä–∞—è (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –Ω–∞—á–∞–ª–∞)
- `facebook/bart-large` - –±–æ–ª–µ–µ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–∞—è
- `t5-base` - –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞

---

## –®–∞–≥ 4: –¢–µ—Å—Ç –ª–æ–∫–∞–ª—å–Ω–æ–π –º–æ–¥–µ–ª–∏

### –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:
```bash
python3 setup_local_model.py
```

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç:
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç –Ω–∞–ª–∏—á–∏–µ GPU/MPS
- ‚úÖ –ó–∞–≥—Ä—É–∑–∏—Ç –º–æ–¥–µ–ª—å
- ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- ‚úÖ –î–∞—Å—Ç —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏: 5-30 —Å–µ–∫—É–Ω–¥ –¥–ª—è 1000-5000 —Å–ª–æ–≤
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏: 2-4 GB
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ MPS: –î–∞ (–Ω–∞ Mac M3 Pro)

---

## –®–∞–≥ 5: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:
```bash
python3 setup_user.py
```

–í–∞–º –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç:
1. –í–≤–µ—Å—Ç–∏ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ (—Å –∫–æ–¥–æ–º —Å—Ç—Ä–∞–Ω—ã, –Ω–∞–ø—Ä–∏–º–µ—Ä: +79991234567)
2. –í–≤–µ—Å—Ç–∏ –∫–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∏–∑ Telegram
3. –í—ã–±—Ä–∞—Ç—å —á–∞—Ç—ã –¥–ª—è —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

---

## –®–∞–≥ 6: –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞

### –ó–∞–ø—É—Å—Ç–∏—Ç–µ –æ—Å–Ω–æ–≤–Ω–æ–π –±–æ—Ç:
```bash
python3 main.py
```

–ë–æ—Ç:
- ‚úÖ –ó–∞–≥—Ä—É–∑–∏—Ç –ª–æ–∫–∞–ª—å–Ω—É—é –º–æ–¥–µ–ª—å –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏
- ‚úÖ –ù–∞—á–Ω–µ—Ç —Å–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å —á–∞—Ç—ã –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é
- ‚úÖ –°–æ–∑–¥–∞—Å—Ç —Å–≤–æ–¥–∫–∏ —Å –ø–æ–º–æ—â—å—é –ª–æ–∫–∞–ª—å–Ω–æ–π –º–æ–¥–µ–ª–∏
- ‚úÖ –û—Ç–ø—Ä–∞–≤–∏—Ç —Å–≤–æ–¥–∫–∏ —á–µ—Ä–µ–∑ Bot API

---

## üîß –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: "ModuleNotFoundError: No module named 'transformers'"
**–†–µ—à–µ–Ω–∏–µ:**
```bash
pip3 install transformers torch sentencepiece
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ú–æ–¥–µ–ª—å –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –æ—á–µ–Ω—å –¥–æ–ª–≥–æ
**–†–µ—à–µ–Ω–∏–µ:**
- –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ (—Å–∫–∞—á–∏–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏ ~1.6 GB)
- –ü–æ—Å–ª–µ–¥—É—é—â–∏–µ –∑–∞–ø—É—Å–∫–∏ –±—É–¥—É—Ç –±—ã—Å—Ç—Ä–µ–µ

### –ü—Ä–æ–±–ª–µ–º–∞: "Out of memory" –æ—à–∏–±–∫–∞
**–†–µ—à–µ–Ω–∏–µ:**
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–æ–ª–µ–µ –ª–µ–≥–∫—É—é –º–æ–¥–µ–ª—å: `facebook/bart-large-cnn`
- –ò–ª–∏ —É–º–µ–Ω—å—à–∏—Ç–µ `MAX_WORKERS` –≤ .env

### –ü—Ä–æ–±–ª–µ–º–∞: MPS –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–µ—Ä—Å–∏—é PyTorch: `python3 -c "import torch; print(torch.backends.mps.is_available())"`
- –û–±–Ω–æ–≤–∏—Ç–µ PyTorch: `pip3 install --upgrade torch`

---

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏:
```bash
# –í –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ
top -pid $(pgrep -f "python3 main.py")
```

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:
```bash
tail -f logs/bot.log
```

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

- [ ] Python 3.8+ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- [ ] –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã (`pip3 install -r requirements.txt`)
- [ ] .env —Ñ–∞–π–ª –Ω–∞—Å—Ç—Ä–æ–µ–Ω —Å `LOCAL_MODEL_PATH`
- [ ] –¢–µ—Å—Ç –º–æ–¥–µ–ª–∏ –ø—Ä–æ—à–µ–ª —É—Å–ø–µ—à–Ω–æ (`python3 setup_local_model.py`)
- [ ] –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω (`python3 setup_user.py`)
- [ ] –ë–æ—Ç –∑–∞–ø—É—â–µ–Ω (`python3 main.py`)

---

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –º–æ–¥–µ–ª—å:**
   ```bash
   python3 setup_local_model.py
   ```

2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**
   ```bash
   python3 setup_user.py
   ```

3. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞:**
   ```bash
   python3 main.py
   ```

4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É:**
   - –ù–∞–π–¥–∏—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞ –≤ Telegram
   - –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start`
   - –î–æ–∂–¥–∏—Ç–µ—Å—å –ø–µ—Ä–≤–æ–π —Å–≤–æ–¥–∫–∏ –∏–ª–∏ –∑–∞–ø—Ä–æ—Å–∏—Ç–µ `/summary`

---

## üí° –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è Mac M3 Pro

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ .env:

```env
# –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
MAX_WORKERS=6  # –ú–æ–∂–Ω–æ —É–≤–µ–ª–∏—á–∏—Ç—å –¥–æ 8 –¥–ª—è M3 Pro
ENABLE_CACHING=true
USE_MPS=true
BATCH_SIZE=4

# –ú–æ–¥–µ–ª—å
LOCAL_MODEL_PATH=facebook/bart-large-cnn  # –î–ª—è –Ω–∞—á–∞–ª–∞
# –ü–æ–∑–∂–µ –º–æ–∂–Ω–æ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å: facebook/bart-large
```

### –¢–µ—Å—Ç –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç–∏:
```bash
python3 test_scaling.py
```

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –ø–æ–∫–∞–∂–µ—Ç —Ä–µ–∞–ª—å–Ω—É—é –ø—Ä–æ–ø—É—Å–∫–Ω—É—é —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –≤–∞—à–µ–≥–æ Mac.

---

**–ì–æ—Ç–æ–≤–æ!** –¢–µ–ø–µ—Ä—å —É –≤–∞—Å –Ω–∞—Å—Ç—Ä–æ–µ–Ω –±–æ—Ç —Å –ª–æ–∫–∞–ª—å–Ω–æ–π –º–æ–¥–µ–ª—å—é –Ω–∞ Mac M3 Pro! üéâ
