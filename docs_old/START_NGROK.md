# üöÄ –ó–∞–ø—É—Å–∫ ngrok –¥–ª—è Telegram Login Widget

## –ü—Ä–æ–±–ª–µ–º–∞
–û—à–∏–±–∫–∞ "bot domain invalid" –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –Ω—É–∂–µ–Ω –ø—É–±–ª–∏—á–Ω—ã–π –¥–æ–º–µ–Ω, –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤ BotFather.

## –†–µ—à–µ–Ω–∏–µ: ngrok

### –®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)

```bash
brew install ngrok/ngrok/ngrok
```

### –®–∞–≥ 2: –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞

1. –û—Ç–∫—Ä–æ–π—Ç–µ https://dashboard.ngrok.com/get-started/your-authtoken
2. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å (–±–µ—Å–ø–ª–∞—Ç–Ω–æ)
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–æ–∫–µ–Ω

### –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–æ–∫–µ–Ω–∞

```bash
ngrok config add-authtoken –í–ê–®_–¢–û–ö–ï–ù
```

### –®–∞–≥ 4: –ó–∞–ø—É—Å–∫ —Ç—É–Ω–Ω–µ–ª—è

–í **–Ω–æ–≤–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ** –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```bash
ngrok http 5000
```

–í—ã —É–≤–∏–¥–∏—Ç–µ:
```
Forwarding  https://xxxx-xx-xx-xx-xx.ngrok-free.app -> http://localhost:5000
```

**–°–∫–æ–ø–∏—Ä—É–π—Ç–µ URL**: `https://xxxx-xx-xx-xx-xx.ngrok-free.app`

### –®–∞–≥ 5: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –¥–æ–º–µ–Ω–∞ –≤ BotFather

1. –û—Ç–∫—Ä–æ–π—Ç–µ Telegram ‚Üí @BotFather
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ: `/setdomain`
3. –í—ã–±–µ—Ä–∏—Ç–µ: `My_sum_test_bot`
4. –í–≤–µ–¥–∏—Ç–µ –¥–æ–º–µ–Ω (–±–µ–∑ https://): `xxxx-xx-xx-xx-xx.ngrok-free.app`

### –®–∞–≥ 6: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ .env

```bash
cd "/Users/dmitry/Desktop/Cursor/–ø—Ä–æ—Å—Ç–æ –≤–æ–ø—Ä–æ—Å—ã/telegram_summary_bot"
echo "AUTH_SERVER_URL=https://xxxx-xx-xx-xx-xx.ngrok-free.app/auth" >> .env
```

(–ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à ngrok URL)

### –®–∞–≥ 7: –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –±–æ—Ç–∞

```bash
pkill -f "python3 main.py"
python3 main.py > /tmp/bot_ngrok.log 2>&1 &
```

### –®–∞–≥ 8: –ü—Ä–æ–≤–µ—Ä–∫–∞

1. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/auth` –±–æ—Ç—É
2. –û—Ç–∫—Ä–æ–π—Ç–µ —Å—Å—ã–ª–∫—É (—Ç–µ–ø–µ—Ä—å —ç—Ç–æ ngrok URL)
3. –ö–Ω–æ–ø–∫–∞ "Login with Telegram" –¥–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è!

---

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

- **ngrok –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–ø—É—â–µ–Ω** –ø–æ–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–æ—Ç
- –ü—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ ngrok (–±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –ø–ª–∞–Ω) URL –º–æ–∂–µ—Ç –∏–∑–º–µ–Ω–∏—Ç—å—Å—è
- –ï—Å–ª–∏ URL –∏–∑–º–µ–Ω–∏–ª—Å—è - –ø–æ–≤—Ç–æ—Ä–∏—Ç–µ —à–∞–≥–∏ 5-7

## üîÑ –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏:
```bash
./check_and_setup.sh
```
